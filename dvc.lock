schema: '2.0'
stages:
  download_dataset:
    cmd: python scripts/download.py hydra.run.dir="data" &>logs/download.out
    deps:
    - path: scripts/download.py
      md5: 640e95086f360db889872bb7344733b7
      size: 758
    outs:
    - path: ./data/raw
      md5: 174fe7fcb400140a007ac05c36b5bfd4.dir
      size: 68556316
      nfiles: 3001
    - path: logs/download.out
      md5: ec53e8b36bf3e9195e3335da09d32711
      size: 569
  preprocess:
    cmd: python scripts/preprocess.py  &> logs/preprocess.out
    deps:
    - path: ./data/raw
      md5: 174fe7fcb400140a007ac05c36b5bfd4.dir
      size: 68556316
      nfiles: 3001
    - path: scripts/preprocess.py
      md5: 50833941e6156b8c22be5055dc488ceb
      size: 1654
    outs:
    - path: ./data/dataset/test
      md5: 1a4c4caa889956e490f56ae562ff20a3.dir
      size: 6806673
      nfiles: 289
    - path: ./data/dataset/train
      md5: 0a1a83aa537b94b2b07eb1503701eca7.dir
      size: 45613376
      nfiles: 2000
    - path: ./data/dataset/val
      md5: 66f5d65f767670234a790daab36b877e.dir
      size: 16136127
      nfiles: 711
    - path: logs/preprocess.out
      md5: 10fa1f0c5daefec5f97ddd786f69f006
      size: 3747
  train:
    cmd: python scripts/train2.py
    deps:
    - path: ./data/dataset/train
      md5: 0a1a83aa537b94b2b07eb1503701eca7.dir
      size: 45613376
      nfiles: 2000
    - path: ./data/dataset/val
      md5: 66f5d65f767670234a790daab36b877e.dir
      size: 16136127
      nfiles: 711
    - path: scripts/train2.py
      md5: e48c37d4269958b6ce57b1965eb2a53b
      size: 3345
    params:
      params.yaml:
        train:
          batch_size: 32
          img_size:
          - 160
          - 160
          learning_rate: 0.0001
          subdir:
            train: train
            valid: valid
            test: test
          epochs: 1
          activation: relu
          n_channels: 32
    outs:
    - path: ./data/train/best_weights.h5
      md5: 91b8a73490c399872b01e0779eb5e56d
      size: 39663512
    - path: ./data/train/model
      md5: 6e4ee19ce2ec679da99f47371226bd9e.dir
      size: 40053575
      nfiles: 3
    - path: ./data/train/training_metrics
      md5: 526586f29a9e97be3779cc07d76168ba.dir
      size: 244
      nfiles: 4
